<template>
    <view class="detail">
        <swiper
            class="swiper card padding-sm margin-xs"
            :indicator-dots="true"
            :indicator-color="'rgba(135, 206, 250, 0.3)'"
            :indicator-active-color="'#87cefa'"
            :current="currentSwiper"
            :duration="360"
        >
            <swiper-item class="swiper-container" v-for="(item, index) in officialBooks[0].coverGroup" :key="index">
                <image mode="aspectFill" :src="item"></image>
            </swiper-item>
        </swiper>

        <!-- 商品信息 -->
        <view class="goods-info card margin-xs padding-sm">
            <view class="name text-bold text-lg">
                {{ book.name }}
            </view>
            <view class="price margin-top-sm">
                <view class="current text-red">
                    {{ book.price * 0.9 }}
                </view>
                <view class="original text-gray margin-top-sm">
                    {{ book.price }}
                </view>
            </view>
            <view class="description margin-top-sm">
                {{ book.desc }}
            </view>
        </view>

        <view class="show-goods card margin-xs padding-sm text-center">
            <image v-for="(item, index) in officialBooks[0].coverGroup" :key="index" :src="item"></image>
        </view>

        <!-- 底部栏 -->
        <view class="bottom-bar flex align-center justify-between padding-sm">
            <view class="left flex justify-between align-center">
                <view class="item">
                    <view class="row-1 flex align-center justify-center">
                        <image class="icon" src="@/static/cart.png" />
                        <tui-badge v-if="$store.state.tentativeTrade.length !== 0" type="danger">
                            {{ $store.state.tentativeTrade.length }}
                        </tui-badge>
                    </view>
                    <view class="row-2 text-sm">
                        客服
                    </view>
                </view>

                <view class="item">
                    <view class="row-1 flex align-center justify-center">
                        <image class="icon" src="@/static/cart.png" />
                        <tui-badge v-if="$store.state.tentativeTrade.length !== 0" type="danger">
                            {{ $store.state.tentativeTrade.length }}
                        </tui-badge>
                    </view>
                    <view class="row-2 text-sm">
                        客服
                    </view>
                </view>

                <view class="item">
                    <view class="row-1 flex align-center justify-center">
                        <image class="icon" src="@/static/cart.png" />
                        <tui-badge v-if="$store.state.tentativeTrade.length !== 0" type="danger">
                            {{ $store.state.tentativeTrade.length }}
                        </tui-badge>
                    </view>
                    <view class="row-2 text-sm">
                        购物车
                    </view>
                </view>
            </view>

            <view class="right flex justify-between align-center">
                <tui-button height="80rpx" width="160rpx" type="primary" :size="25" shape="circle" background="#87cefa">
                    立即购买
                </tui-button>

                <tui-button height="80rpx" width="180rpx" type="gray" :size="25" shape="circle">
                    加入购物车
                </tui-button>
            </view>
        </view>
    </view>
</template>

<script>
import officialBooks from '@/assets/data/official-books.js'

export default {
    name: 'detail',
    data() {
        return {
            currentSwiper: 0,
            officialBooks,
            book: {}
        }
    },
    methods: {},
    onLoad(options) {
        this.$axios.get(`/get/book/by/id/${options.id}`).then(response => {
            this.book = response.data[0]
        })
    }
}
</script>

<style lang="scss" scoped>
.detail {
    background-color: rgb(248, 248, 248);

    .swiper {
        height: 400rpx;

        .swiper-container {
            image {
                height: 100%;
                width: 100%;
            }
        }
    }

    .goods-info {
        .price {
            .current {
                font-size: 45rpx;
            }

            .current::before {
                content: '二手价¥';
                font-size: 80%;
                margin-right: 4rpx;
            }

            .original {
                text-decoration: line-through;
            }

            .original::before {
                content: '原价¥';
                font-size: 80%;
                margin-right: 4rpx;
            }
        }

        .description {
            display: -webkit-box;
            word-break: break-all;
            -webkit-box-orient: vertical;
            -webkit-line-clamp: 4;
            overflow: hidden;
            text-overflow: ellipsis;
        }
    }

    .bottom-bar {
        width: 100%;
        position: fixed;
        bottom: 0;
        left: 0;
        background-color: white;

        .left {
            width: 40%;

            .icon {
                width: 40rpx;
                height: 40rpx;
            }
        }

        .right {
            width: 50%;
        }
    }
}
</style>
