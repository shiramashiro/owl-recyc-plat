<template>
    <view class="msg">
        <view class="top padding-lr-lg flex justify-between align-center">
            <template v-for="(navigator, index) in navigators">
                <navigator :key="index" :url="navigator.url">
                    <view class="flex align-center justify-center">
                        <image
                            style="width: 70rpx; height: 70rpx"
                            mode="aspectFill"
                            :src="navigator.image"
                        />
                    </view>
                    <view class="text-gray">
                        {{ navigator.name }}
                    </view>
                </navigator>
            </template>
        </view>
        <view class="chat-panel">
            <view
                class="cu-list menu-avatar"
                v-for="(item, index) in chats"
                :key="index"
                @click="chooseChatItem(item)"
            >
                <view class="cu-item">
                    <view class="cu-avatar">
                        <owl-avatar :size="60" :src="item.url"></owl-avatar>
                    </view>
                    <view class="content">
                        <view class="text-pink">
                            <text class="text-cut">{{ item.name }}</text>
                        </view>
                        <view class="text-gray text-sm flex">
                            <text class="text-cut">{{ item.detail }}</text>
                        </view>
                    </view>
                    <view class="action">
                        <view class="text-grey text-xs">
                            {{ item.time }}
                        </view>
                        <template v-if="item.new > 0">
                            <view class="cu-tag round bg-red sm">
                                {{ item.new }}
                            </view>
                        </template>
                    </view>
                </view>
            </view>
        </view>
    </view>
</template>

<script>
export default {
    name: 'msg',
    data() {
        return {
            navigators: [
                {
                    url: '/pages/msg/reply',
                    name: '回复我的',
                    image: require('@/static/reply.png')
                },
                {
                    url: '/pages/msg/praise',
                    name: '收到的赞',
                    image: require('@/static/praise.png')
                },
                {
                    url: '/pages/msg/notify',
                    name: '系统通知',
                    image: require('@/static/sys-msg.png')
                }
            ],
            chats: [
                {
                    id: 1,
                    url:
                        'https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=2621980968,324835243&fm=26&gp=0.jpg',
                    name: '创作中心',
                    time: '04-05',
                    detail:
                        '数据存储进行了性能优化，它的具体优化方式和升级注意事项',
                    new: 0
                },
                {
                    id: 2,
                    url:
                        'https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=2621980968,324835243&fm=26&gp=0.jpg',
                    name: '创作中心',
                    time: '04-05',
                    detail:
                        '数据存储进行了性能优化，它的具体优化方式和升级注意事项',
                    new: 0
                },
                {
                    id: 3,
                    url:
                        'https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=2621980968,324835243&fm=26&gp=0.jpg',
                    name: '创作中心',
                    time: '04-05',
                    detail:
                        '数据存储进行了性能优化，它的具体优化方式和升级注意事项',
                    new: 0
                },
                {
                    id: 4,
                    url:
                        'https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=2621980968,324835243&fm=26&gp=0.jpg',
                    name: '创作中心',
                    time: '04-05',
                    detail:
                        '数据存储进行了性能优化，它的具体优化方式和升级注意事项',
                    new: 1
                },
                {
                    id: 5,
                    url:
                        'https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=2621980968,324835243&fm=26&gp=0.jpg',
                    name: '创作中心',
                    time: '04-05',
                    detail:
                        '数据存储进行了性能优化，它的具体优化方式和升级注意事项',
                    new: 20
                },
                {
                    id: 6,
                    url:
                        'https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=2621980968,324835243&fm=26&gp=0.jpg',
                    name: '创作中心',
                    time: '04-05',
                    detail:
                        '数据存储进行了性能优化，它的具体优化方式和升级注意事项',
                    new: 10
                },
                {
                    id: 7,
                    url:
                        'https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=2621980968,324835243&fm=26&gp=0.jpg',
                    name: '创作中心',
                    time: '04-05',
                    detail:
                        '数据存储进行了性能优化，它的具体优化方式和升级注意事项',
                    new: 10
                },
                {
                    id: 8,
                    url:
                        'https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=2621980968,324835243&fm=26&gp=0.jpg',
                    name: '创作中心',
                    time: '04-05',
                    detail:
                        '数据存储进行了性能优化，它的具体优化方式和升级注意事项',
                    new: 10
                }
            ]
        }
    },
    methods: {
        chooseChatItem(item) {
            uni.navigateTo({
                url: '/pages/msg/chat?id=' + item.id
            })
        }
    }
}
</script>

<style lang="css" scoped>
.top {
    position: sticky;
    top: 0;
    z-index: 998;
    width: 100%;
    height: 120rpx;
    background-color: #ffffff;
    box-shadow: 8rpx 8rpx 10rpx #e5e0e0;
}
</style>
